import 'package:flutter/material.dart';

class AboutPage extends StatelessWidget {
  const AboutPage({super.key});

  @override
  Widget build(BuildContext context) {
    final screenWidth = MediaQuery.of(context).size.width;
    return SingleChildScrollView(
      padding: const EdgeInsets.all(20),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const Text(
            'À Propos de Moi',
            style: TextStyle(
              fontSize: 36,
              fontWeight: FontWeight.bold,
              color: Colors.blue,
            ),
          ),
          const SizedBox(height: 20),
          LayoutBuilder(
            builder: (context, constraints) {
              bool isLargeScreen = constraints.maxWidth > 800;
              return Flex(
                direction: isLargeScreen ? Axis.horizontal : Axis.vertical,
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Expanded(
                    flex: isLargeScreen ? 1 : 0,
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        ClipRRect(
                          borderRadius: BorderRadius.circular(15),
                          child: Image.asset(
                            'assets/images/about.jpg',
                            fit: BoxFit.cover,
                          ),
                        ),
                        const SizedBox(height: 20),
                        _buildInfoCard(
                          'Personnalité',
                          [
                            'Créatif et innovant',
                            "Esprit d'équipe",
                          'Passionné par la technologie',
                            'Apprentissage continu',
                          ],
                        ),
                      ],
                    ),
                  ),
                  if (isLargeScreen) const SizedBox(width: 40) else const SizedBox(height: 20),
                  Expanded(
                    flex: isLargeScreen ? 2 : 0,
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        const Text(
                          'Qui suis-je ?',
                          style: TextStyle(
                            fontSize: 24,
                            fontWeight: FontWeight.bold,
                            color: Colors.blue,
                          ),
                        ),
                        const SizedBox(height: 20),
                        const Text(
                          'Je suis André SENOU, élève ingénieur en conception des procédés du génie énergétique à l’ENSGEP (Abomey). Passionné par l’électronique et les systèmes embarqués, je m’intéresse également aux énergies renouvelables et à l’électricité du bâtiment. \n\n'
                              'Depuis 2019, j’ai acquis une solide expérience en réparation de téléphones, obtenant en 2024 un diplôme d’État en maintenance GSM grâce au Certificat de Qualification aux Métiers (CQM). Mon expertise s’étend aussi à la maintenance informatique, couvrant le hardware et le software, ainsi que la réparation d’ordinateurs et autres équipements électroniques. \n\n'
                              'En parallèle, je développe des applications Android et je travaille sur des projets intégrant Arduino et d’autres systèmes embarqués. Mon objectif est de combiner mon savoir-faire technique et mon ingénierie énergétique pour créer des solutions innovantes adaptées aux besoins locaux.',
                          style: TextStyle(
                            fontSize: 16,
                            height: 1.6,
                          ),
                        ),
                        const SizedBox(height: 30),
                        _buildSkillsSection(isLargeScreen),
                      ],
                    ),
                  ),
                ],
              );
            },
          ),
        ],
      ),
    );
  }

  Widget _buildInfoCard(String title, List<String> items) {
    return Card(
      elevation: 4,
      child: Padding(
        padding: const EdgeInsets.all(20),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(
              title,
              style: const TextStyle(
                fontSize: 20,
                fontWeight: FontWeight.bold,
                color: Colors.blue,
              ),
            ),
            const SizedBox(height: 15),
            ...items.map((item) => Padding(
              padding: const EdgeInsets.symmetric(vertical: 5),
              child: Row(
                children: [
                  const Icon(Icons.check_circle, color: Colors.green, size: 20),
                  const SizedBox(width: 10),
                  Text(item),
                ],
              ),
            )),
          ],
        ),
      ),
    );
  }

  Widget _buildSkillsSection(bool isLargeScreen) {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        const Text(
          'Mes Compétences',
          style: TextStyle(
            fontSize: 24,
            fontWeight: FontWeight.bold,
            color: Colors.blue,
          ),
        ),
        const SizedBox(height: 20),
        Wrap(
          spacing: isLargeScreen ? 20 : 10,
          runSpacing: 20,
          children: [
            _buildSkillCard('Développement Flutter', 85),
            _buildSkillCard('Maintenance GSM', 90),
            _buildSkillCard('Énergie Solaire et Génie Énergétique', 80),
            _buildSkillCard('Arduino et Systèmes Embarqués', 75),
            _buildSkillCard('Python et Automatisation', 70),
            _buildSkillCard('C/C++', 65),
            _buildSkillCard('Maintenance Informatique (Hardware/Software)', 85),
          ],
        ),
      ],
    );
  }

  Widget _buildSkillCard(String skill, double percentage) {
    return Container(
      width: 200,
      padding: const EdgeInsets.all(15),
      decoration: BoxDecoration(
        color: Colors.white,
        borderRadius: BorderRadius.circular(10),
        boxShadow: [
          BoxShadow(
            color: Colors.grey.withOpacity(0.2),
            spreadRadius: 2,
            blurRadius: 5,
          ),
        ],
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(
            skill,
            style: const TextStyle(
              fontWeight: FontWeight.bold,
            ),
          ),
          const SizedBox(height: 10),
          LinearProgressIndicator(
            value: percentage / 100,
            backgroundColor: Colors.grey[200],
            valueColor: const AlwaysStoppedAnimation<Color>(Colors.blue),
          ),
          const SizedBox(height: 5),
          Text('${percentage.toInt()}%'),
        ],
      ),
    );
  }
}
